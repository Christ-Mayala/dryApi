# --- ENVIRONNEMENT GÃ‰NÃ‰RAL ---
NODE_ENV=development

PORT=5000

# Nom de l'app DRY (optionnel selon le bootloader)
# Le serveur actuel charge automatiquement tous les dossiers dans dryApp/ (ex: SpiritEmeraude, SCIM)
APP_NAME=LaStreet

# Contact par dÃ©faut de l'agence (utilisÃ© par /api/v1/scim/message/scim)
SCIM_CONTACT_EMAIL=scim@example.com
SCIM_WHATSAPP_PHONE=242060000000
SCIM_RESERVATION_SLA_MINUTES=30
SCIM_RESERVATION_REMINDER_MINUTES=30
SCIM_REMINDER_ENABLED=true
SCIM_REMINDER_CRON=*/1 * * * *
SCIM_REMINDER_BATCH_SIZE=50
SCIM_DEFAULT_COUNTRY_CODE=+242
SCIM_ENABLE_EMAIL_NOTIFICATIONS=false
SCIM_ENABLE_SMS_NOTIFICATIONS=false
SCIM_ENABLE_WHATSAPP_NOTIFICATIONS=false
SCIM_TWILIO_ACCOUNT_SID=
SCIM_TWILIO_AUTH_TOKEN=
SCIM_TWILIO_SMS_FROM=
SCIM_TWILIO_WHATSAPP_FROM=

# E2E SCIM (tests locaux)
E2E_SCIM_BASE_URL=http://localhost:5000
E2E_SCIM_ALLOW_REMOTE=false
E2E_SCIM_REQUESTER_PHONE=
E2E_SCIM_TEST_ACK=false

# Salt pour hasher l'IP (vues uniques par IP sur 24h)
VIEW_IP_SALT=change_me

# --- SÃ‰CURITÃ‰ / AUTH ---
# ClÃ© JWT forte (64+ caractÃ¨res), NE PAS COMMIT
JWT_SECRET=change_me_to_a_long_random_secret_key_64_chars_min
# DurÃ©e des tokens JWT
JWT_EXPIRE=7d

# Limite des tentatives de login (alignÃ©e avec user.schema.js)
MAX_LOGIN_ATTEMPTS=5
LOCK_TIME=2  # en heures
RATE_LIMIT_WINDOW_MS=600000
RATE_LIMIT_MAX=100
RATE_LIMIT_AUTH_MULTIPLIER=10
RATE_LIMIT_ADMIN_MULTIPLIER=50
RATE_LIMIT_SKIP_AUTHENTICATED=true
RATE_LIMIT_SKIP_ADMIN=false

# CORS: origines autorisÃ©es pour le frontend
# En dev:
ALLOWED_ORIGINS=http://localhost:4200,http://localhost:5173,http://127.0.0.1:4200,http://127.0.0.1:5173

# En prod tu mettras quelque chose comme:
# ALLOWED_ORIGINS=https://spiritemeraude.com,https://admin.spiritemeraude.com

# --- BASE DE DONNÃ‰ES (Mongo) ---
# Connexion cluster Mongo multi-tenant.
# Adapte l'URI avec ton cluster/credentials.
MONGO_URI=mongodb+srv://USERNAME:PASSWORD@cluster0.example.mongodb.net
MONGO_DB_PREFIX=dry_  # prÃ©fixe des DB par tenant si tu en utilises

# --- REDIS (CACHE) ---
# Optionnel: si tu veux activer le cache Redis
REDIS_URL=redis://localhost:6379
# En production:
# REDIS_URL=redis://username:password@host:port

# --- LOGGING ---
LOG_REQUESTS=true

# --- CLOUDINARY (UPLOAD IMAGES) ---
CLOUDINARY_CLOUD_NAME=change_me
CLOUDINARY_API_KEY=change_me
CLOUDINARY_API_SECRET=change_me

# --- EMAIL (si tu utilises email.service.js) ---
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=change_me
SMTP_PASSWORD=change_me
SMTP_FROM="Spirit Emeraude" <no-reply@spiritemeraude.com>

# --- LOGS / AUDIT ---
# Tu peux ajouter un niveau de log, fichier, etc., selon tes besoins

# --- PURGE AUTOMATIQUE (SUPPRESSION HARD DES Ã‰LÃ‰MENTS SOFT-DELETED) ---
PURGE_ENABLED=true
PURGE_AFTER_DAYS=14
PURGE_CRON=0 3 * * *

# --- SEEDERS ---
SEED_ADMIN_EMAIL=admin@admin.com
SEED_ADMIN_NAME=Admin
SEED_ADMIN_PASSWORD=Admin@2026

# --- CONFIGURATION ENVIRONNEMENT SPÃ‰CIFIQUE ---
# DÃ©veloppement
NODE_ENV_DEV=development
PORT_DEV=5000
MONGO_URI_DEV=mongodb+srv://dev_user:dev_pass@cluster0.example.mongodb.net
REDIS_URL_DEV=redis://localhost:6379
JWT_SECRET_DEV=dev_secret_key_64_chars_minimum_for_development
ALLOWED_ORIGINS_DEV=http://localhost:3000,http://localhost:3001
SCIM_WHATSAPP_PHONE_DEV=242060000001
SCIM_RESERVATION_SLA_MINUTES_DEV=20
SCIM_RESERVATION_REMINDER_MINUTES_DEV=20
SCIM_REMINDER_ENABLED_DEV=true
SCIM_REMINDER_BATCH_SIZE_DEV=50
SCIM_ENABLE_EMAIL_NOTIFICATIONS_DEV=false
SCIM_ENABLE_SMS_NOTIFICATIONS_DEV=false
SCIM_ENABLE_WHATSAPP_NOTIFICATIONS_DEV=false

# Production
NODE_ENV_PRODUCTION=production
PORT_PRODUCTION=5000
MONGO_URI_PRODUCTION=mongodb+srv://prod_user:prod_pass@cluster0.example.mongodb.net
REDIS_URL_PRODUCTION=redis://prod-server:6379
JWT_SECRET_PRODUCTION=super_secure_production_secret_key_64_chars_minimum
ALLOWED_ORIGINS_PRODUCTION=https://yourdomain.com,https://admin.yourdomain.com

# Tests
NODE_ENV_TEST=test
PORT_TEST=5001
MONGO_URI_TEST=mongodb://localhost:27017/dryapi_test
REDIS_URL_TEST=redis://localhost:6379/1
JWT_SECRET_TEST=test_secret_key
SCIM_WHATSAPP_PHONE_TEST=
SCIM_RESERVATION_SLA_MINUTES_TEST=5
SCIM_RESERVATION_REMINDER_MINUTES_TEST=5
SCIM_REMINDER_ENABLED_TEST=false
SCIM_REMINDER_BATCH_SIZE_TEST=20
SCIM_ENABLE_EMAIL_NOTIFICATIONS_TEST=false
SCIM_ENABLE_SMS_NOTIFICATIONS_TEST=false
SCIM_ENABLE_WHATSAPP_NOTIFICATIONS_TEST=false

# --- ALERTING / MONITORING ---
ALERT_WEBHOOK_URL=
SLACK_WEBHOOK_URL=
DISCORD_WEBHOOK_URL=
ALERT_EMAIL_TO=
HEALTH_MONITOR_INTERVAL_MS=60000
MONITOR_REPEAT_ALERTS=false
MONITOR_REPEAT_ALERT_MS=900000
MONITOR_DAILY_SUMMARY=true
MONITOR_DAILY_SUMMARY_MS=86400000
MONITOR_LOGS_EVERY_DAYS=3
MONITOR_LOGS_EVERY_MS=259200000
MONITOR_SUMMARY_ON_START=false

# Alertes erreurs API
ALERT_API_ERRORS=true
ALERT_API_CLIENT_ERRORS=false

# Anti-spam / details des alertes
ALERT_DEDUP_WINDOW_MS=60000
ALERT_MAX_STACK_LINES=20
ALERT_MAX_VALUE_LENGTH=1500

# Gestion des erreurs Node.js globales
CRASH_ON_UNHANDLED_REJECTION=false
FATAL_ERROR_EXIT_DELAY_MS=3500

