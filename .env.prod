# ===== CONFIG DRY API (PROD) =====
NODE_ENV=production
PORT=5000
APP_NAME=DRY API
FRONTEND_URL=https://medias-dl.netlify.app

# ===== CORS =====
# Liste d'origines autorisees (separees par des virgules)
CORS_ORIGINS=https://medias-dl.netlify.app,https://spirit-kes.netlify.app,https://scim.netlify.app,https://la-street.netlify.app,http://localhost:4200
# Alias legacy (si utilise par l'ancien code)
ALLOWED_ORIGINS=https://medias-dl.netlify.app,https://spirit-kes.netlify.app,https://scim.netlify.app,https://la-street.netlify.app,http://localhost:4200

# ===== JWT / AUTH =====
JWT_EXPIRE=7d
# Cle longue et robuste (64+ caracteres)
JWT_SECRET=CHANGE_ME_LONG_RANDOM_SECRET_64_CHARS_MIN
# Ancienne cle pendant une rotation (optionnel)
JWT_SECRET_PREVIOUS=
MAX_LOGIN_ATTEMPTS=5
LOCK_TIME=2
LOG_REQUESTS=true

# ===== DATABASE =====
MONGO_URI=CHANGE_ME_MONGO_ATLAS_URI
MONGO_DB_PREFIX=

# ===== PURGE =====
PURGE_ENABLED=true
PURGE_AFTER_DAYS=14
PURGE_CRON="0 3 * * *"

# ===== SEED (prod: a eviter) =====
SEED_ADMIN_EMAIL=
SEED_ADMIN_NAME=
SEED_ADMIN_PASSWORD=

# ===== CLOUDINARY =====
CLOUDINARY_CLOUD_NAME=CHANGE_ME
CLOUDINARY_API_KEY=CHANGE_ME
CLOUDINARY_API_SECRET=CHANGE_ME

# ===== EMAIL (service auth) =====
# Fournisseur: auto | smtp | resend
# En prod sur Render gratuit, preferer resend
EMAIL_PROVIDER=resend

# SMTP settings (utilises si provider=smtp)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=
EMAIL_PASS=

# Adresse "from" par defaut (SMTP + Resend)
# IMPORTANT: pour Resend, utiliser un domaine verifie
EMAIL_FROM=contact@ton-domaine.com

# Compat (noms historiques)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_EMAIL=
SMTP_PASSWORD=
SMTP_FROM='"DRY API" <no-reply@ton-domaine.com>'
FROM_EMAIL=contact@ton-domaine.com

# ===== RESEND (si utilise) =====
RESEND_API_KEY=CHANGE_ME_RESEND_API_KEY

# ===== SCIM =====
SCIM_CONTACT_EMAIL=contact@ton-domaine.com
SCIM_TIMEZONE=Africa/Brazzaville
SCIM_TZ_OFFSET_MINUTES=60

# ===== MISC =====
VIEW_IP_SALT=CHANGE_ME_RANDOM_SALT

# ===== ALERTING / MONITORING =====
# Webhooks (optionnels) - vide si alertes par email uniquement
ALERT_WEBHOOK_URL=
SLACK_WEBHOOK_URL=
DISCORD_WEBHOOK_URL=

# Email qui recoit les alertes
ALERT_EMAIL_TO=contact@ton-domaine.com

# Intervalle de verification (ms)
HEALTH_MONITOR_INTERVAL_MS=60000

# Repetition des alertes pendant une panne
# false = 1 mail au debut + 1 mail au retour
MONITOR_REPEAT_ALERTS=false
# Si MONITOR_REPEAT_ALERTS=true (ms)
MONITOR_REPEAT_ALERT_MS=900000

# Alertes erreurs API
# true = envoie les erreurs serveur (5xx / techniques) par email/webhook
ALERT_API_ERRORS=true
# false = ignore les erreurs client attendues (4xx)
ALERT_API_CLIENT_ERRORS=false

# Anti-spam / precision des alertes
ALERT_DEDUP_WINDOW_MS=60000
ALERT_MAX_STACK_LINES=20
ALERT_MAX_VALUE_LENGTH=1500

# Gestion des erreurs Node.js globales
# true = unhandledRejection redemarre le process
CRASH_ON_UNHANDLED_REJECTION=false
# Delai avant exit sur erreur fatale pour laisser le temps a l'alerte de partir
FATAL_ERROR_EXIT_DELAY_MS=3500

# Resume quotidien des incidents
MONITOR_DAILY_SUMMARY=true
MONITOR_DAILY_SUMMARY_MS=86400000

# Resume des logs tous les X jours
MONITOR_LOGS_EVERY_DAYS=3
MONITOR_LOGS_EVERY_MS=259200000

# Envoyer un resume au demarrage
MONITOR_SUMMARY_ON_START=false

# ===== SERVER =====
SERVER_URL=https://ton-api.com

# ===== CACHE =====
REDIS_ENABLED=false

# ===== MEDIA =====
# Dossier local temporaire (fichiers supprimes automatiquement)
MEDIA_DIR=/var/tmp/mediadl-downloads
MEDIA_VERBOSE=false

# Desactiver les mises a jour yt-dlp pour Render
YTDL_NO_UPDATE=true

# ===== YOUTUBE (optionnel, utile sur Render) =====
# Si YouTube bloque l'IP du serveur (datacenter), ajoutez vos cookies ici.
# Format: "key1=value1; key2=value2" (copie depuis votre navigateur)
YT_COOKIES=
# User-Agent custom si besoin (sinon valeur par defaut dans le code)
YT_USER_AGENT=
