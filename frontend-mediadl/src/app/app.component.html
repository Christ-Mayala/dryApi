<div class="app-shell">
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <!-- Brand -->
        <a class="brand" routerLink="/">
          <div class="brand-icon">
            <img src="assets/logo.svg" alt="MediaDL" width="40" height="40">
          </div>
          <div class="brand-text">
            <div class="brand-title">MediaDL</div>
            <div class="brand-tagline">Téléchargement intelligent</div>
          </div>
        </a>

        <!-- Navigation -->
        <nav class="nav">
          <a class="nav-link" 
             routerLink="/" 
             routerLinkActive="active" 
             [routerLinkActiveOptions]="{ exact: true }">
            <lucide-icon name="house" size="18"></lucide-icon>
            Accueil
          </a>
          
          <a class="nav-link" 
             routerLink="/downloads" 
             routerLinkActive="active" 
             *ngIf="isAuthed">
            <lucide-icon name="download" size="18"></lucide-icon>
            Mes téléchargements
          </a>
          
          <a class="nav-link" 
             routerLink="/auth" 
             routerLinkActive="active" 
             *ngIf="!isAuthed">
            <lucide-icon name="log-in" size="18"></lucide-icon>
            Connexion
          </a>
          
          <a class="nav-link" 
             routerLink="/profile" 
             routerLinkActive="active" 
             *ngIf="isAuthed">
            <lucide-icon name="user" size="18"></lucide-icon>
            Mon compte
          </a>
        </nav>

        <!-- Session -->
        <div class="session" *ngIf="isAuthed; else guest">
          <div class="user-info">
            <div class="user-avatar">
              <lucide-icon name="circle-user" size="20"></lucide-icon>
            </div>
            <div class="user-details">
              <span class="user-name">{{ userLabel }}</span>
              <span class="user-status">En ligne</span>
            </div>
          </div>
          <button class="btn ghost small" type="button" (click)="logout()">
            <lucide-icon name="log-out" size="16"></lucide-icon>
            Déconnexion
          </button>
        </div>

        <ng-template #guest>
          <div class="guest-actions">
            <a class="btn primary" routerLink="/auth">
              <lucide-icon name="rocket" size="16"></lucide-icon>
              Commencer
            </a>
          </div>
        </ng-template>

        <!-- Mobile Menu Toggle -->
        <button class="menu-toggle" (click)="toggleMobileMenu()" aria-label="Toggle menu">
          <lucide-icon [name]="isMobileMenuOpen ? 'x' : 'menu'" size="24"></lucide-icon>
        </button>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div class="mobile-menu" [class.active]="isMobileMenuOpen">
      <div class="mobile-menu-content">
        <a class="mobile-nav-link" 
           routerLink="/" 
           (click)="closeMobileMenu()">
          <lucide-icon name="house" size="20"></lucide-icon>
          Accueil
        </a>
        
        <a class="mobile-nav-link" 
           routerLink="/downloads" 
           *ngIf="isAuthed"
           (click)="closeMobileMenu()">
          <lucide-icon name="download" size="20"></lucide-icon>
          Mes téléchargements
        </a>
        
        <a class="mobile-nav-link" 
           routerLink="/auth" 
           *ngIf="!isAuthed"
           (click)="closeMobileMenu()">
          <lucide-icon name="log-in" size="20"></lucide-icon>
          Connexion
        </a>
        
        <a class="mobile-nav-link" 
           routerLink="/profile" 
           *ngIf="isAuthed"
           (click)="closeMobileMenu()">
          <lucide-icon name="user" size="20"></lucide-icon>
          Mon compte
        </a>

        <div class="mobile-session" *ngIf="isAuthed">
          <div class="mobile-user-info">
            <div class="user-avatar">
              <lucide-icon name="circle-user" size="24"></lucide-icon>
            </div>
            <div class="user-details">
              <span class="user-name">{{ userLabel }}</span>
              <span class="user-status">Connecté</span>
            </div>
          </div>
          <button class="btn outline full-width" (click)="logout(); closeMobileMenu()">
            <lucide-icon name="log-out" size="18"></lucide-icon>
            Se déconnecter
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <router-outlet></router-outlet>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <div class="brand-logo">
            <img src="assets/logo.svg" alt="MediaDL" width="32" height="32">
          </div>
          <div class="brand-info">
            <div class="brand-title">MediaDL</div>
            <div class="brand-tagline">Votre compagnon de téléchargement</div>
          </div>
        </div>
        
        <div class="footer-links">
          <div class="footer-column">
            <h4>Produit</h4>
            <a routerLink="/features">Fonctionnalités</a>
            <a routerLink="/pricing">Tarifs</a>
            <a routerLink="/changelog">Mises à jour</a>
          </div>
          
          <div class="footer-column">
            <h4>Support</h4>
            <a routerLink="/help">Centre d'aide</a>
            <a routerLink="/contact">Contact</a>
            <a routerLink="/status">Statut du service</a>
          </div>
          
          <div class="footer-column">
            <h4>Légal</h4>
            <a routerLink="/privacy">Confidentialité</a>
            <a routerLink="/terms">Conditions</a>
            <a routerLink="/cookies">Cookies</a>
          </div>
        </div>
        
        <div class="footer-social">
          <h4>Suivez-nous</h4>
          <div class="social-icons">
            <a href="#" aria-label="Twitter" class="social-icon">
              <lucide-icon name="twitter" size="20"></lucide-icon>
            </a>
            <a href="#" aria-label="GitHub" class="social-icon">
              <lucide-icon name="github" size="20"></lucide-icon>
            </a>
            <a href="#" aria-label="Discord" class="social-icon">
              <lucide-icon name="message-circle" size="20"></lucide-icon>
            </a>
          </div>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; {{ currentYear }} MediaDL. Tous droits réservés.</p>
        <div class="footer-lang">
          <select class="lang-select">
            <option value="fr">Français</option>
            <option value="en">English</option>
            <option value="es">Español</option>
          </select>
        </div>
      </div>
    </div>
  </footer>
</div>